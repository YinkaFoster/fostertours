import React, { createContext, useContext, useState, useEffect } from 'react';

// Available currencies with symbols and exchange rates (approximate)
const CURRENCIES = {
  USD: { symbol: '$', name: 'US Dollar', rate: 1 },
  EUR: { symbol: 'â‚¬', name: 'Euro', rate: 0.92 },
  GBP: { symbol: 'Â£', name: 'British Pound', rate: 0.79 },
  NGN: { symbol: 'â‚¦', name: 'Nigerian Naira', rate: 1550 },
  CAD: { symbol: 'C$', name: 'Canadian Dollar', rate: 1.36 },
  AUD: { symbol: 'A$', name: 'Australian Dollar', rate: 1.53 },
  AED: { symbol: 'Ø¯.Ø¥', name: 'UAE Dirham', rate: 3.67 },
  INR: { symbol: 'â‚¹', name: 'Indian Rupee', rate: 83.12 },
  ZAR: { symbol: 'R', name: 'South African Rand', rate: 18.50 },
  KES: { symbol: 'KSh', name: 'Kenyan Shilling', rate: 153 },
};

// Available languages
const LANGUAGES = {
  en: { name: 'English', flag: 'ðŸ‡ºðŸ‡¸', nativeName: 'English' },
  fr: { name: 'French', flag: 'ðŸ‡«ðŸ‡·', nativeName: 'FranÃ§ais' },
  es: { name: 'Spanish', flag: 'ðŸ‡ªðŸ‡¸', nativeName: 'EspaÃ±ol' },
  de: { name: 'German', flag: 'ðŸ‡©ðŸ‡ª', nativeName: 'Deutsch' },
  pt: { name: 'Portuguese', flag: 'ðŸ‡µðŸ‡¹', nativeName: 'PortuguÃªs' },
  ar: { name: 'Arabic', flag: 'ðŸ‡¸ðŸ‡¦', nativeName: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },
  zh: { name: 'Chinese', flag: 'ðŸ‡¨ðŸ‡³', nativeName: 'ä¸­æ–‡' },
  ha: { name: 'Hausa', flag: 'ðŸ‡³ðŸ‡¬', nativeName: 'Hausa' },
  yo: { name: 'Yoruba', flag: 'ðŸ‡³ðŸ‡¬', nativeName: 'YorÃ¹bÃ¡' },
  ig: { name: 'Igbo', flag: 'ðŸ‡³ðŸ‡¬', nativeName: 'Igbo' },
};

// Translation strings
const TRANSLATIONS = {
  en: {
    // Navigation
    flights: 'Flights',
    hotels: 'Hotels',
    events: 'Events',
    vehicles: 'Vehicles',
    visa: 'Visa',
    store: 'Store',
    blog: 'Blog',
    aiPlanner: 'AI Planner',
    dashboard: 'Dashboard',
    wallet: 'Wallet',
    profile: 'Profile',
    settings: 'Settings',
    logout: 'Logout',
    login: 'Login',
    signUp: 'Sign Up',
    // Common
    search: 'Search',
    book: 'Book Now',
    viewDetails: 'View Details',
    price: 'Price',
    from: 'From',
    to: 'To',
    date: 'Date',
    guests: 'Guests',
    rooms: 'Rooms',
    adults: 'Adults',
    children: 'Children',
    // Footer
    quickLinks: 'Quick Links',
    support: 'Support',
    stayUpdated: 'Stay Updated',
    subscribe: 'Subscribe',
    allRightsReserved: 'All rights reserved',
    // Chatbot
    chatWithUs: 'Chat with us',
    typeMessage: 'Type your message...',
    // Currency & Language
    currency: 'Currency',
    language: 'Language',
  },
  fr: {
    flights: 'Vols',
    hotels: 'HÃ´tels',
    events: 'Ã‰vÃ©nements',
    vehicles: 'VÃ©hicules',
    visa: 'Visa',
    store: 'Boutique',
    blog: 'Blog',
    aiPlanner: 'Planificateur IA',
    dashboard: 'Tableau de bord',
    wallet: 'Portefeuille',
    profile: 'Profil',
    settings: 'ParamÃ¨tres',
    logout: 'DÃ©connexion',
    login: 'Connexion',
    signUp: "S'inscrire",
    search: 'Rechercher',
    book: 'RÃ©server',
    viewDetails: 'Voir les dÃ©tails',
    price: 'Prix',
    from: 'De',
    to: 'Ã€',
    date: 'Date',
    guests: 'InvitÃ©s',
    rooms: 'Chambres',
    adults: 'Adultes',
    children: 'Enfants',
    quickLinks: 'Liens rapides',
    support: 'Support',
    stayUpdated: 'Restez informÃ©',
    subscribe: "S'abonner",
    allRightsReserved: 'Tous droits rÃ©servÃ©s',
    chatWithUs: 'Discutez avec nous',
    typeMessage: 'Tapez votre message...',
    currency: 'Devise',
    language: 'Langue',
  },
  es: {
    flights: 'Vuelos',
    hotels: 'Hoteles',
    events: 'Eventos',
    vehicles: 'VehÃ­culos',
    visa: 'Visa',
    store: 'Tienda',
    blog: 'Blog',
    aiPlanner: 'Planificador IA',
    dashboard: 'Panel',
    wallet: 'Cartera',
    profile: 'Perfil',
    settings: 'ConfiguraciÃ³n',
    logout: 'Cerrar sesiÃ³n',
    login: 'Iniciar sesiÃ³n',
    signUp: 'Registrarse',
    search: 'Buscar',
    book: 'Reservar',
    viewDetails: 'Ver detalles',
    price: 'Precio',
    from: 'Desde',
    to: 'Hasta',
    date: 'Fecha',
    guests: 'HuÃ©spedes',
    rooms: 'Habitaciones',
    adults: 'Adultos',
    children: 'NiÃ±os',
    quickLinks: 'Enlaces rÃ¡pidos',
    support: 'Soporte',
    stayUpdated: 'Mantente informado',
    subscribe: 'Suscribirse',
    allRightsReserved: 'Todos los derechos reservados',
    chatWithUs: 'Chatea con nosotros',
    typeMessage: 'Escribe tu mensaje...',
    currency: 'Moneda',
    language: 'Idioma',
  },
  de: {
    flights: 'FlÃ¼ge',
    hotels: 'Hotels',
    events: 'Veranstaltungen',
    vehicles: 'Fahrzeuge',
    visa: 'Visum',
    store: 'GeschÃ¤ft',
    blog: 'Blog',
    aiPlanner: 'KI-Planer',
    dashboard: 'Dashboard',
    wallet: 'GeldbÃ¶rse',
    profile: 'Profil',
    settings: 'Einstellungen',
    logout: 'Abmelden',
    login: 'Anmelden',
    signUp: 'Registrieren',
    search: 'Suchen',
    book: 'Jetzt buchen',
    viewDetails: 'Details anzeigen',
    price: 'Preis',
    from: 'Von',
    to: 'Nach',
    date: 'Datum',
    guests: 'GÃ¤ste',
    rooms: 'Zimmer',
    adults: 'Erwachsene',
    children: 'Kinder',
    quickLinks: 'Schnelllinks',
    support: 'Support',
    stayUpdated: 'Bleib informiert',
    subscribe: 'Abonnieren',
    allRightsReserved: 'Alle Rechte vorbehalten',
    chatWithUs: 'Chatte mit uns',
    typeMessage: 'Nachricht eingeben...',
    currency: 'WÃ¤hrung',
    language: 'Sprache',
  },
  pt: {
    flights: 'Voos',
    hotels: 'HotÃ©is',
    events: 'Eventos',
    vehicles: 'VeÃ­culos',
    visa: 'Visto',
    store: 'Loja',
    blog: 'Blog',
    aiPlanner: 'Planejador IA',
    dashboard: 'Painel',
    wallet: 'Carteira',
    profile: 'Perfil',
    settings: 'ConfiguraÃ§Ãµes',
    logout: 'Sair',
    login: 'Entrar',
    signUp: 'Cadastrar',
    search: 'Buscar',
    book: 'Reservar',
    viewDetails: 'Ver detalhes',
    price: 'PreÃ§o',
    from: 'De',
    to: 'Para',
    date: 'Data',
    guests: 'HÃ³spedes',
    rooms: 'Quartos',
    adults: 'Adultos',
    children: 'CrianÃ§as',
    quickLinks: 'Links rÃ¡pidos',
    support: 'Suporte',
    stayUpdated: 'Fique atualizado',
    subscribe: 'Inscrever-se',
    allRightsReserved: 'Todos os direitos reservados',
    chatWithUs: 'Fale conosco',
    typeMessage: 'Digite sua mensagem...',
    currency: 'Moeda',
    language: 'Idioma',
  },
  ar: {
    flights: 'Ø±Ø­Ù„Ø§Øª',
    hotels: 'ÙÙ†Ø§Ø¯Ù‚',
    events: 'ÙØ¹Ø§Ù„ÙŠØ§Øª',
    vehicles: 'Ù…Ø±ÙƒØ¨Ø§Øª',
    visa: 'ØªØ£Ø´ÙŠØ±Ø©',
    store: 'Ù…ØªØ¬Ø±',
    blog: 'Ù…Ø¯ÙˆÙ†Ø©',
    aiPlanner: 'Ù…Ø®Ø·Ø· Ø°ÙƒÙŠ',
    dashboard: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
    wallet: 'Ø§Ù„Ù…Ø­ÙØ¸Ø©',
    profile: 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',
    settings: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
    logout: 'ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬',
    login: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„',
    signUp: 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',
    search: 'Ø¨Ø­Ø«',
    book: 'Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†',
    viewDetails: 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„',
    price: 'Ø§Ù„Ø³Ø¹Ø±',
    from: 'Ù…Ù†',
    to: 'Ø¥Ù„Ù‰',
    date: 'Ø§Ù„ØªØ§Ø±ÙŠØ®',
    guests: 'Ø§Ù„Ø¶ÙŠÙˆÙ',
    rooms: 'Ø§Ù„ØºØ±Ù',
    adults: 'Ø¨Ø§Ù„ØºÙŠÙ†',
    children: 'Ø£Ø·ÙØ§Ù„',
    quickLinks: 'Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©',
    support: 'Ø§Ù„Ø¯Ø¹Ù…',
    stayUpdated: 'Ø§Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§Ø·Ù„Ø§Ø¹',
    subscribe: 'Ø§Ø´ØªØ±Ùƒ',
    allRightsReserved: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©',
    chatWithUs: 'ØªØ­Ø¯Ø« Ù…Ø¹Ù†Ø§',
    typeMessage: 'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...',
    currency: 'Ø§Ù„Ø¹Ù…Ù„Ø©',
    language: 'Ø§Ù„Ù„ØºØ©',
  },
  zh: {
    flights: 'èˆªç­',
    hotels: 'é…’åº—',
    events: 'æ´»åŠ¨',
    vehicles: 'è½¦è¾†',
    visa: 'ç­¾è¯',
    store: 'å•†åº—',
    blog: 'åšå®¢',
    aiPlanner: 'AIè§„åˆ’å¸ˆ',
    dashboard: 'ä»ªè¡¨æ¿',
    wallet: 'é’±åŒ…',
    profile: 'ä¸ªäººèµ„æ–™',
    settings: 'è®¾ç½®',
    logout: 'é€€å‡º',
    login: 'ç™»å½•',
    signUp: 'æ³¨å†Œ',
    search: 'æœç´¢',
    book: 'ç«‹å³é¢„è®¢',
    viewDetails: 'æŸ¥çœ‹è¯¦æƒ…',
    price: 'ä»·æ ¼',
    from: 'ä»Ž',
    to: 'åˆ°',
    date: 'æ—¥æœŸ',
    guests: 'å®¢äºº',
    rooms: 'æˆ¿é—´',
    adults: 'æˆäºº',
    children: 'å„¿ç«¥',
    quickLinks: 'å¿«é€Ÿé“¾æŽ¥',
    support: 'æ”¯æŒ',
    stayUpdated: 'ä¿æŒæ›´æ–°',
    subscribe: 'è®¢é˜…',
    allRightsReserved: 'ä¿ç•™æ‰€æœ‰æƒåˆ©',
    chatWithUs: 'ä¸Žæˆ‘ä»¬èŠå¤©',
    typeMessage: 'è¾“å…¥æ‚¨çš„æ¶ˆæ¯...',
    currency: 'è´§å¸',
    language: 'è¯­è¨€',
  },
  ha: {
    flights: 'Jiragen Sama',
    hotels: 'Otal',
    events: 'Bukukuwa',
    vehicles: 'Motoci',
    visa: 'Biza',
    store: 'Shago',
    blog: 'Blog',
    aiPlanner: 'Mai Tsarawa AI',
    dashboard: 'Dashboard',
    wallet: 'Jakar KuÉ—i',
    profile: 'Bayani',
    settings: 'Saituna',
    logout: 'Fita',
    login: 'Shiga',
    signUp: 'Yi Rajista',
    search: 'Bincika',
    book: 'Yi Booking',
    viewDetails: 'Duba Cikakkun Bayanai',
    price: 'Farashi',
    from: 'Daga',
    to: 'Zuwa',
    date: 'Kwanan Wata',
    guests: 'BaÆ™i',
    rooms: 'ÆŠakuna',
    adults: 'Manya',
    children: 'Yara',
    quickLinks: 'Hanyoyin Sauri',
    support: 'Taimako',
    stayUpdated: 'Kasance Cikin Sani',
    subscribe: 'Yi Rajista',
    allRightsReserved: 'An Kiyaye Duk HaÆ™Æ™oÆ™i',
    chatWithUs: 'Yi Magana Da Mu',
    typeMessage: 'Rubuta sakonka...',
    currency: 'KuÉ—i',
    language: 'Harshe',
  },
  yo: {
    flights: 'á»Œká» Ã’furufÃº',
    hotels: 'IlÃ© ÃŒtura',
    events: 'Ã€wá»n ÃŒá¹£áº¹Ì€láº¹Ì€',
    vehicles: 'á»Œká»Ì€',
    visa: 'Fisa',
    store: 'IlÃ© ÃŒtajÃ ',
    blog: 'Blog',
    aiPlanner: 'OlÃ¹gbÃ©rÃ²Ã³ AI',
    dashboard: 'Dashboard',
    wallet: 'Ã€pÃ² OwÃ³',
    profile: 'Ã€ká»sÃ­láº¹Ì€',
    settings: 'ÃˆtÃ²',
    logout: 'JÃ¡de',
    login: 'Wá»lÃ©',
    signUp: 'ForÃºká» sÃ­láº¹Ì€',
    search: 'WÃ¡',
    book: 'á¹¢e ÃŒfipamá»Ì',
    viewDetails: 'Wo Ã€lÃ yÃ©',
    price: 'Iye OwÃ³',
    from: 'LÃ¡ti',
    to: 'SÃ­',
    date: 'á»Œjá»Ì',
    guests: 'Ã€lejÃ²',
    rooms: 'YÃ rÃ¡',
    adults: 'Ã€gbÃ ',
    children: 'á»Œmá»dÃ©',
    quickLinks: 'Ã€wá»n ÃŒsopá»Ì€ KÃ­Ã¡kÃ­Ã¡',
    support: 'ÃŒrÃ nlá»Ìwá»Ì',
    stayUpdated: 'GbÃ© ÃŒmá»Ì€ Tuntun',
    subscribe: 'ForÃºká» sÃ­láº¹Ì€',
    allRightsReserved: 'Gbogbo áº¸Ì€tá»Ì Ni A Pamá»Ì',
    chatWithUs: 'Sá»Ì€rá»Ì€ Páº¹Ì€lÃº Wa',
    typeMessage: 'Táº¹ Ã¬firansen ráº¹...',
    currency: 'OwÃ³',
    language: 'ÃˆdÃ¨',
  },
  ig: {
    flights: 'á»¤gbá» Elu',
    hotels: 'á»¤lá» Nkwari',
    events: 'Mmemme',
    vehicles: 'á»¤gbá» Ala',
    visa: 'Visa',
    store: 'á»¤lá» Ahá»‹a',
    blog: 'Blog',
    aiPlanner: 'Onye Nhazi AI',
    dashboard: 'Dashboard',
    wallet: 'Obere Akpa',
    profile: 'Profaá»‹lá»¥',
    settings: 'Ntá»ala',
    logout: 'Pá»¥á»',
    login: 'Banye',
    signUp: 'Debanye Aha',
    search: 'Chá»á»',
    book: 'Debe',
    viewDetails: 'Lee Nká»wa',
    price: 'á»Œná»¥ Ahá»‹a',
    from: 'Site',
    to: 'Gaa',
    date: 'á»¤bá»chá»‹',
    guests: 'Ndá»‹ á»Œbá»‹a',
    rooms: 'á»Œná»¥ á»¤lá»',
    adults: 'Ndá»‹ Okenye',
    children: 'á»¤má»¥aka',
    quickLinks: 'Njiká» Ngwa Ngwa',
    support: 'Nkwado',
    stayUpdated: 'Ná»rá» N\'oge',
    subscribe: 'Debanye Aha',
    allRightsReserved: 'Echekwara Ikike Niile',
    chatWithUs: 'Kpará»‹ta á»¤ka Anyá»‹',
    typeMessage: 'Pá»‹nye ozi gá»‹...',
    currency: 'Ego',
    language: 'Asá»¥sá»¥',
  },
};

const LocaleContext = createContext();

export const useLocale = () => {
  const context = useContext(LocaleContext);
  if (!context) {
    throw new Error('useLocale must be used within a LocaleProvider');
  }
  return context;
};

export const LocaleProvider = ({ children }) => {
  const [currency, setCurrency] = useState(() => {
    return localStorage.getItem('currency') || 'USD';
  });
  
  const [language, setLanguage] = useState(() => {
    return localStorage.getItem('language') || 'en';
  });

  useEffect(() => {
    localStorage.setItem('currency', currency);
  }, [currency]);

  useEffect(() => {
    localStorage.setItem('language', language);
    // Set document direction for RTL languages
    document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
  }, [language]);

  // Format price with currency
  const formatPrice = (amount, fromCurrency = 'USD') => {
    const currencyInfo = CURRENCIES[currency];
    const fromRate = CURRENCIES[fromCurrency]?.rate || 1;
    const toRate = currencyInfo.rate;
    
    // Convert amount
    const convertedAmount = (amount / fromRate) * toRate;
    
    // Format with locale
    const formatted = new Intl.NumberFormat(language === 'ar' ? 'ar-SA' : 'en-US', {
      minimumFractionDigits: currency === 'NGN' || currency === 'KES' ? 0 : 2,
      maximumFractionDigits: currency === 'NGN' || currency === 'KES' ? 0 : 2,
    }).format(convertedAmount);
    
    return `${currencyInfo.symbol}${formatted}`;
  };

  // Get translation
  const t = (key) => {
    return TRANSLATIONS[language]?.[key] || TRANSLATIONS['en'][key] || key;
  };

  const value = {
    // Currency
    currency,
    setCurrency,
    currencies: CURRENCIES,
    formatPrice,
    currencySymbol: CURRENCIES[currency]?.symbol || '$',
    
    // Language
    language,
    setLanguage,
    languages: LANGUAGES,
    t,
    isRTL: language === 'ar',
  };

  return (
    <LocaleContext.Provider value={value}>
      {children}
    </LocaleContext.Provider>
  );
};

export { CURRENCIES, LANGUAGES, TRANSLATIONS };
